import test from 'ava';

import assertQueuesExists from '../lib/assert-queues-exists';

import minimalOptions from './config.json';

test('throw error if queues are unreacheable', async t => {
  await t.throws(assertQueuesExists(minimalOptions, ['azertyuiop']));
});

test('assert queues are reacheable', async t => {
  await t.notThrows(assertQueuesExists(minimalOptions, ['firstQueue']));
});

test('resolve if queues are undefined (autogenerated queue)', async t => {
  await t.notThrows(assertQueuesExists(minimalOptions));
});
